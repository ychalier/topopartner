{% extends 'topopartner/base.html' %}
{% load static %}

{% block title %}Edit track &mid; {{ block.super }}{% endblock title %}

{% block head %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'topopartner/css/map.css' %}">
{% endblock head %}

{% block main_content %}

<div class="h1">
    <a href="{% url 'topopartner:tracks' %}">{% if track.is_itinerary %}Itineraries{% else %}Recordings{% endif %} &#10093;</a>
    <a href="{% url 'topopartner:view_track' tid=track.id %}">{{ track.label }}</a>
</div>

<div class="columns">

    <div class="column col-8 col-sm-12">
        {% include 'topopartner/map.html' %}
    </div>

    <div class="column col-4 col-sm-12">

        <div>
            <a class="btn btn-primary" href="{% url 'topopartner:fetch_elevation_data' tid=track.id %}">Fetch elevation</a>
            <button id="buttonClearTrack" class="btn btn-primary" type="button" name="button">Clear track</button>
            <a class="btn btn-primary" href="{% url 'topopartner:delete_track' tid=track.id %}">Delete track</a>
        </div>

        <div id="track_form">
            <div class="form-group">
                <label class="form-label" for="input-label">Label</label>
                <input class="form-input" type="text" name="label"  placeholder="Label*" id="input-label" />
            </div>
            <div class="form-group">
                <label class="form-label" for="input-comment">Comment</label>
                <textarea class="form-input" name="comment" rows="8" cols="80" placeholder="Comment" id="input-comment"></textarea>
            </div>
            <div class="form-group">
                <label class="form-switch">
                    <input id="input_public" type="checkbox" name="public" {% if track.public %}checked{% endif %} />
                    <i class="form-icon"></i> Make the track public
                </label>
            </div>
            <div class="form-group">
                <label class="form-switch">
                    <input id="input_itinerary" type="checkbox" name="itinerary" {% if track.is_itinerary %}checked{% endif %} />
                    <i class="form-icon"></i> Make the track an itinerary
                </label>
            </div>
            <button id="buttonSaveTrack" class="btn btn-primary" type="button" name="button">Save</button>
        </div>
    </div>

    <script type="text/javascript">
        mapWrapper.bindButtonClearTrack("buttonClearTrack");
        mapWrapper.bindButtonSaveTrack("buttonSaveTrack");
        mapWrapper.bindTrackForm("track_form");
        document.querySelector("#track_form input[name='label']").value = "{{ track.label | safe }}";
        document.querySelector("#track_form textarea[name='comment']").value = "{{ track.comment | safe }}";
    </script>

</div>
{% endblock main_content %}
